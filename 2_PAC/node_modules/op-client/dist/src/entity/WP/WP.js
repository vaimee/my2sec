"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Abstract_1 = __importDefault(require("../Abstract/Abstract"));
const Status_1 = __importDefault(require("../Status/Status"));
const Type_1 = __importDefault(require("../Type/Type"));
const Link_1 = __importDefault(require("../decorators/Link"));
const Project_1 = __importDefault(require("../Project/Project"));
const CO_1 = __importDefault(require("../CO/CO"));
const Duration_1 = __importDefault(require("../Abstract/Duration"));
const Field_1 = __importDefault(require("../decorators/Field"));
const index_1 = require("../../index");
const Embedded_1 = __importDefault(require("../decorators/Embedded"));
/**
 * Work package
 */
class WP extends Abstract_1.default {
    constructor(init) {
        super(init);
    }
    get ancestor() {
        if (!this.body._links.ancestors) {
            return undefined;
        }
        if (this.body._links.ancestors.length) {
            return new WP(this.body._links.ancestors[this.body._links.ancestors.length - 1]);
        }
        return null;
    }
    get children() {
        if (!this.body._links.children) {
            return undefined;
        }
        return this.body._links.children.map(eachChildJson => new WP(eachChildJson));
    }
    toString() {
        return `${this.id} ${this.type.self.title}(${this.type.id}) ${this.self.title}`;
    }
}
WP.url = '/api/v3/work_packages';
__decorate([
    Field_1.default('subject', String),
    __metadata("design:type", String)
], WP.prototype, "subject", void 0);
__decorate([
    Field_1.default('startDate', Date),
    __metadata("design:type", Date)
], WP.prototype, "startDate", void 0);
__decorate([
    Field_1.default('dueDate', Date),
    __metadata("design:type", Date)
], WP.prototype, "dueDate", void 0);
__decorate([
    Field_1.default('scheduleManually', Boolean),
    __metadata("design:type", Boolean)
], WP.prototype, "scheduleManually", void 0);
__decorate([
    Field_1.default('createdAt', Date),
    __metadata("design:type", Date)
], WP.prototype, "createdAt", void 0);
__decorate([
    Field_1.default('estimatedTime', Duration_1.default),
    __metadata("design:type", Duration_1.default)
], WP.prototype, "estimatedTime", void 0);
__decorate([
    Field_1.default('spentTime', Duration_1.default),
    __metadata("design:type", Duration_1.default)
], WP.prototype, "spentTime", void 0);
__decorate([
    Field_1.default('derivedEstimatedTime', Duration_1.default),
    __metadata("design:type", Duration_1.default)
], WP.prototype, "derivedEstimatedTime", void 0);
__decorate([
    Link_1.default('project', Project_1.default),
    __metadata("design:type", Project_1.default)
], WP.prototype, "project", void 0);
__decorate([
    Embedded_1.default('project', Project_1.default),
    __metadata("design:type", Project_1.default)
], WP.prototype, "embeddedProject", void 0);
__decorate([
    Link_1.default('status', Status_1.default),
    __metadata("design:type", Status_1.default)
], WP.prototype, "status", void 0);
__decorate([
    Embedded_1.default('status', Status_1.default),
    __metadata("design:type", Status_1.default)
], WP.prototype, "embeddedStatus", void 0);
__decorate([
    Link_1.default('type', Type_1.default),
    __metadata("design:type", Type_1.default)
], WP.prototype, "type", void 0);
__decorate([
    Embedded_1.default('type', Type_1.default),
    __metadata("design:type", Type_1.default)
], WP.prototype, "embeddedType", void 0);
__decorate([
    Link_1.default('customField1', CO_1.default),
    __metadata("design:type", CO_1.default)
], WP.prototype, "module", void 0);
__decorate([
    Link_1.default('assignee', index_1.User),
    __metadata("design:type", index_1.User)
], WP.prototype, "assignee", void 0);
__decorate([
    Link_1.default('author', index_1.User),
    __metadata("design:type", index_1.User)
], WP.prototype, "author", void 0);
__decorate([
    Link_1.default('parent', WP),
    __metadata("design:type", WP)
], WP.prototype, "parent", void 0);
exports.default = WP;
//# sourceMappingURL=WP.js.map